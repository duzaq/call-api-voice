# Configurações globais
debug=3
log_stderror=yes
log_facility=LOG_LOCAL0

# Módulos a serem carregados
loadmodule "kemi.so"
# ... (resto dos módulos)

#  MODULES PARAMETERS
modparam("rr", "enable_full_lr", 1)
# ... (resto dos parâmetros)

# Configuração do socket
listen=udp:0.0.0.0:5060 as opensips_1
port=5060

# Roteamento básico
route {
    # Verifica o número máximo de encaminhamentos
    if (!mf_process_maxfwd_header("10")) {
        xlog("L_ERR", "Too many hops\n");
        sl_send_reply("483", "Too Many Hops");
        exit;
    }

    # ... (resto da rota)
}

# FAILURE ROUTE (Handle SIP failures)
failure_route[1] {
    if (t_is_canceled()) {
        exit;
    }
}
